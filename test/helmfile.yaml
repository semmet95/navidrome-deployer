helmDefaults:
  timeout: 600

repositories:
- name: longhorn
  url: https://charts.longhorn.io
- name: cert-manager
  url: quay.io/jetstack/charts
  oci: true

releases:
- name: cert-manager
  namespace: cert-manager
  chart: cert-manager/cert-manager
  version: v1.19.2
  createNamespace: true
  wait: true
  values:
  - crds:
      enabled: true 
- name: longhorn
  namespace: longhorn-system
  chart: longhorn/longhorn
  version: 1.11.0
  createNamespace: true
  wait: true
  values:
  - longhornUI:
      replicas: 0
- name: navidrome
  namespace: navidrome-system
  chart: ../charts/navidrome-deployer
  createNamespace: true
  wait: true
  waitForJobs: true
  values:
  - filebrowser:
      reconfigImageUri: "filebrowser-reconfig:snapshot"
  needs:
  - longhorn-system/longhorn
  - cert-manager/cert-manager